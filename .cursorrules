# AI Agent Constraints & Hygiene

Follow these rules strictly to prevent context drift and hallucinations:

## 1. Source of Truth
- Always ground logic in `spec.md`. If a request contradicts the spec, clarify with the user first.

## 2. Explicit Context Tagging
- Only access files directly related to the current task. Do not scan the entire workspace unless explicitly requested for an audit.

## 3. Plan, Then Execute
- **Mandatory**: Always generate and get approval for an `implementation_plan.md` (or detailed pseudo-code) before making any code changes.

## 4. Test-Driven Execution (TDD)
- **Mandatory**: For any new logic or bug fix, create/update a test case in `src/__tests__` (using Vitest) first.
- Ensure the test fails as expected before implementing the fix.
- Implementation is complete only when tests pass.

## 5. Session Hygiene
- Focus on one task per turn.
- If a task involves multiple components, break it down clearly in `task.md`.
- Suggest clearing chat context after successful implementation/git commit.
